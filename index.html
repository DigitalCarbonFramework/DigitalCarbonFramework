<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Ad Carbon Calculation Framework &#8212; ad-carbon-calculation-framework 1.O documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=143ca478"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="carbon" href="apidoc/modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ad-carbon-calculation-framework">
<h1>Ad Carbon Calculation Framework<a class="headerlink" href="#ad-carbon-calculation-framework" title="Link to this heading">¶</a></h1>
<p><img alt="Status" src="https://img.shields.io/badge/alpha-green?label=status" /></p>
<p>Reference framework for calculating the carbon footprint of digital campaigns.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>The DigitalCarbonFramework association presents a framework for assessing the carbon emissions generated by an advertising campaign. For more information on the methodology, please refer to the following link:
<a class="reference external" href="https://www.sri-france.org/wp-content/uploads/2023/06/SRI_Calculating-the-carbon-footprint_V2.pdf">Link to DigitalCarbonFramework methodology</a>.</p>
<p>This Python package offers an implementation of the DigitalCarbonFramework methodology. Let’s delve into how we’ve modeled this methodology and explore how you can utilize it to quantify the campaign’s carbon impact.</p>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h3>
<p>The carbon emissions associated with an advertising campaign can be categorized into two main components: Allocation and Diffusion.</p>
<p>Allocation refers to the process of ad selection, which occurs either through programmatic or direct means. Once the ad selection process is successful, the ad is displayed on targeted devices, a process referred to as Diffusion. Each category can further be subdivided into subcategories to provide a more detailed breakdown of the carbon costs involved.</p>
<p>The Allocation phase is segmented into two parts: servers and networks. Servers are responsible for storing, managing, and delivering digital advertisements to end-users, while the ads transit through the network.</p>
<p>The Diffusion phase is divided into three components: servers, networks, and devices.</p>
<p>This modelization defines five pillars for computation to evaluate the carbon cost of a campaign:</p>
<ul class="simple">
<li><p>Allocation network</p></li>
<li><p>Allocation servers</p></li>
<li><p>Diffusion network</p></li>
<li><p>Diffusion servers</p></li>
<li><p>Diffusion devices</p></li>
</ul>
<p>For each pillar, the DigitalCarbonFramework proposes the computation of two costs. Firstly, the cost of utilization (USE), which measures the carbon emissions associated with every impression displayed. Secondly, the cost of Manufacturing, Use, and End of Life (MAN), which accounts for the carbon emissions generated throughout the lifecycle of hardware or infrastructure.</p>
<p>The total carbon cost of the campaign is expressed in kilograms of carbon.</p>
</section>
<section id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h3>
<p>Let’s start by installing the project.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a Python virtual environment (https://docs.python.org/3/library/venv.html)</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="c1"># Activate your environment (https://docs.python.org/3/library/venv.html#how-venvs-work)</span>
<span class="c1"># Here is a bash example</span>
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate
<span class="c1"># Install the current directory as a Python package</span>
<span class="c1"># (https://packaging.python.org/en/latest/tutorials/installing-packages/#installing-from-a-local-src-tree)</span>
pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>From now on, you can start to see the framework in action, with it’s example file <code class="docutils literal notranslate"><span class="pre">src/carbon/__main__.py</span></code>.
Run it to validate your installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>src/carbon
</pre></div>
</div>
<p>If the scripts execute without error, we can deep dive on how to use this framework.</p>
<p>Then, import the required methods and classes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">carbon.digital_carbon_framework</span> <span class="kn">import</span> <span class="n">Framework</span>

<span class="kn">from</span> <span class="nn">carbon.compute_footprints</span> <span class="kn">import</span> <span class="n">Distribution</span><span class="p">,</span> <span class="n">Co2Cost</span>
<span class="kn">from</span> <span class="nn">carbon.compute_footprints</span> <span class="kn">import</span> <span class="n">impressions_cost</span><span class="p">,</span> <span class="n">adcalls_cost</span><span class="p">,</span> <span class="n">bids_cost</span>
</pre></div>
</div>
<section id="the-co2cost-object">
<h4>The <code class="docutils literal notranslate"><span class="pre">Co2Cost</span></code> object<a class="headerlink" href="#the-co2cost-object" title="Link to this heading">¶</a></h4>
<p>This package computes the carbon cost of each pillar of the advertising campaign. Each pillar is represented as <code class="docutils literal notranslate"><span class="pre">Co2Cost</span></code> object, which contains 2 attributes <code class="docutils literal notranslate"><span class="pre">use</span></code> and <code class="docutils literal notranslate"><span class="pre">manufacturing</span></code> to assess the carbon cost of USE and MAN for this pillar. To obtain the total cost of this pillar, you can use the <code class="docutils literal notranslate"><span class="pre">total</span></code> property.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">allocation_network</span> <span class="o">=</span> <span class="n">Co2Cost</span><span class="p">(</span><span class="n">use</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">manufacturing</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">allocation_network</span><span class="o">.</span><span class="n">use</span><span class="p">)</span>
<span class="c1">#&gt; 0.1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">allocation_network</span><span class="o">.</span><span class="n">manufacturing</span><span class="p">)</span>
<span class="c1">#&gt; 0.2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">allocation_network</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>
<span class="c1">#&gt; 0.3</span>
</pre></div>
</div>
</section>
<section id="the-framework-object">
<h4>The <code class="docutils literal notranslate"><span class="pre">Framework</span></code> object<a class="headerlink" href="#the-framework-object" title="Link to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Framework</span></code> object contains all the parameters to compute the carbon cost of an advertising campaign. It contains 11 attributes, each of this one is class representing the parameters of a pillar, either for usage or manufacturing.
All the parameters are defined in the <code class="docutils literal notranslate"><span class="pre">digital_carbon_framework.yml</span></code>, which is loaded by default when an instance of the Framework class is loaded. All the parameters are mutable and can be changed if needed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">campaign</span> <span class="o">=</span> <span class="n">Framework</span><span class="o">.</span><span class="n">load</span><span class="p">()</span> <span class="c1"># load by default the digital_carbon_framework.yml</span>
<span class="nb">print</span><span class="p">(</span><span class="n">campaign</span><span class="o">.</span><span class="n">allocation_network_use</span><span class="o">.</span><span class="n">nb_requests_per_active_path</span><span class="p">)</span>
<span class="c1">#&gt; 3</span>
<span class="n">campaign</span><span class="o">.</span><span class="n">allocation_network_use</span><span class="o">.</span><span class="n">nb_requests_per_active_path</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">campaign</span><span class="o">.</span><span class="n">allocation_network_use</span><span class="o">.</span><span class="n">nb_requests_per_active_path</span><span class="p">)</span>
<span class="c1">#&gt; 5</span>
</pre></div>
</div>
<section id="changing-the-target-country">
<h5>Changing the target country<a class="headerlink" href="#changing-the-target-country" title="Link to this heading">¶</a></h5>
<p>By default, all costs are computed with <em>France</em> as the target country. This implies that the emission factor used to calculate the pillars is based on the emission factor of France. This can be easily changed using the <code class="docutils literal notranslate"><span class="pre">change_target_country</span></code> method.  This method accepts the alpha code of the country, either in <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO2</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO3</a> format, and adjusts the emission factor values accordingly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">campaign</span><span class="o">.</span><span class="n">allocation_servers_use</span><span class="o">.</span><span class="n">emission_factor_country</span><span class="p">)</span>
<span class="c1">#&gt; 0.052</span>

<span class="n">campaign</span><span class="o">.</span><span class="n">change_target_country</span><span class="p">(</span><span class="s1">&#39;DE&#39;</span><span class="p">)</span> <span class="c1"># Changed from France to Germany</span>
<span class="nb">print</span><span class="p">(</span><span class="n">campaign</span><span class="o">.</span><span class="n">allocation_servers_use</span><span class="o">.</span><span class="n">emission_factor_country</span><span class="p">)</span>
<span class="c1">#&gt; 0.311</span>
</pre></div>
</div>
</section>
</section>
<section id="measures">
<h4>Measures<a class="headerlink" href="#measures" title="Link to this heading">¶</a></h4>
<p>This package proposes several carbon measurements. All the methods available are located in the <code class="docutils literal notranslate"><span class="pre">compute_footprints.py</span></code> python file.</p>
<section id="the-impressions-cost-method">
<h5>The <code class="docutils literal notranslate"><span class="pre">impressions_cost</span></code> method<a class="headerlink" href="#the-impressions-cost-method" title="Link to this heading">¶</a></h5>
<p>The primary objective of this repository is to compute the carbon cost of an advertising campaign in accordance with the DigitalCarbonFramework methodology. This is achieved through the <code class="docutils literal notranslate"><span class="pre">impression_costs</span></code> method. Following the DigitalCarbonFramework methodology, this method requires several mandatory fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nb_impressions</span></code>: the number of impressions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">creative_type</span></code>: ‘display’ or ‘video’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allocation</span></code>: ‘direct’ or ‘programmatic’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">creative_size_ko</span></code> (int): the size of the creative</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">devices_repartition</span></code>: the devices targeted</p></li>
<li><p>(Optional) <code class="docutils literal notranslate"><span class="pre">creative_avg_view_s</span></code>: the average view of the creative. This value is mandatory for a display creative. For a video, the default value is 3s.</p></li>
</ul>
<p>This function returns a <code class="docutils literal notranslate"><span class="pre">Co2CampaignCost</span></code> object, which summarizes the carbon cost of the five pillars, for both usage &amp; manufacturing. Additionally, it provides the total carbon cost of the campaign.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">carbon.digital_carbon_framework</span> <span class="kn">import</span> <span class="n">Framework</span>

<span class="kn">from</span> <span class="nn">carbon.compute_footprints</span> <span class="kn">import</span> <span class="n">Distribution</span><span class="p">,</span> <span class="n">Co2Cost</span>
<span class="kn">from</span> <span class="nn">carbon.compute_footprints</span> <span class="kn">import</span> <span class="n">impressions_cost</span><span class="p">,</span> <span class="n">adcalls_cost</span><span class="p">,</span> <span class="n">bids_cost</span>

<span class="n">campaign</span> <span class="o">=</span> <span class="n">Framework</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

<span class="n">campaign</span><span class="o">.</span><span class="n">change_target_country</span><span class="p">(</span><span class="s1">&#39;FR&#39;</span><span class="p">)</span>
<span class="n">DEVICES_REPARTITION</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;desktop&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;smart_phone&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tablet&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;connected_tv&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="n">Devices</span> <span class="o">=</span> <span class="n">Distribution</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="n">DEVICES_REPARTITION</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">impressions_cost</span><span class="p">(</span><span class="n">campaign</span><span class="p">,</span>
            <span class="n">creative_type</span><span class="o">=</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="n">nb_impressions</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span>
            <span class="n">allocation</span><span class="o">=</span><span class="s1">&#39;programmatic&#39;</span><span class="p">,</span> <span class="n">creative_size_ko</span><span class="o">=</span><span class="mf">1e3</span><span class="p">,</span>
            <span class="n">devices_repartition</span><span class="o">=</span><span class="n">Devices</span><span class="p">,</span> <span class="n">creative_avg_view_s</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">shows</span><span class="p">())</span>
<span class="c1"># This is a Co2CampaignCost object.</span>
<span class="c1">#            kgco2_distrib_server:       use:   5.0016    manufacture:   0.1856</span>
<span class="c1">#           kgco2_distrib_network:       use:  12.3361    manufacture:   4.7840</span>
<span class="c1">#          kgco2_distrib_terminal:       use:   0.4247    manufacture:  13.1863</span>
<span class="c1">#        kgco2_allocation_network:       use: 690.3320    manufacture: 202.3402</span>
<span class="c1">#         kgco2_allocation_server:       use:  18.4289    manufacture:  60.9374</span>
<span class="c1">#                         Overall:       use: 726.5232    manufacture: 281.4334</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The total of the carbon emissions for the campaign is: </span><span class="si">{</span><span class="n">results</span><span class="o">.</span><span class="n">overall</span><span class="o">.</span><span class="n">total</span><span class="si">}</span><span class="s1"> kgco2&#39;</span><span class="p">)</span>
<span class="c1">#&gt; The total of the carbon emissions for the campaign is: 1007.9566426365125 kgco2</span>
</pre></div>
</div>
</section>
<section id="the-bids-cost-function">
<h5>The <code class="docutils literal notranslate"><span class="pre">bids_cost</span></code> function<a class="headerlink" href="#the-bids-cost-function" title="Link to this heading">¶</a></h5>
<p>This function computes the carbon emissions associated with a bid only. It specifically focuses on the carbon emissions related to the allocation process. A bid is approximated as a direct buying process, resembling a single path from the Demand-Side Platform (DSP) to the Supply-Side Platform (SSP). However, considering internal processes and calls during bidding, we estimate that approximately 4 paths are activated. Therefore, the function takes into account the emissions from these 4 paths when computing the carbon emissions of a bid.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">co2_bids_only</span> <span class="o">=</span> <span class="n">bids_cost</span><span class="p">(</span><span class="n">campaign</span><span class="p">,</span> <span class="n">nb_bids</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">co2_bids_only</span><span class="o">.</span><span class="n">shows</span><span class="p">()</span>

<span class="c1">#This is a BidCost object.</span>
<span class="c1">#        kgco2_allocation_network:       use:   0.0789    manufacture:   0.0231</span>
<span class="c1">#         kgco2_allocation_server:       use:   0.0021    manufacture:   0.0070</span>
<span class="c1">#                         Overall:       use:   0.0810    manufacture:   0.0301</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The carbon emissions for the bidding process is: </span><span class="si">{</span><span class="n">co2_bids_only</span><span class="o">.</span><span class="n">overall</span><span class="o">.</span><span class="n">total</span><span class="si">}</span><span class="s1"> kgco2&#39;</span><span class="p">)</span>
<span class="c1">#&gt; The total of the carbon emissions for the campaign is: 0.11109010712522793 kgco2</span>
</pre></div>
</div>
</section>
<section id="the-adcalls-cost-function">
<h5>The <code class="docutils literal notranslate"><span class="pre">adcalls_cost</span></code> function<a class="headerlink" href="#the-adcalls-cost-function" title="Link to this heading">¶</a></h5>
<p>This function computes the carbon emissions of a number of ad calls. The number of SSPs connected to prebid is estimated to 10 on average.
The DigitalCarbonFramework defines a number of paths activated for video creative (100) and display creative (350).
An ad call is made to only 1 SSP. Given the estimation of 10 SSPs, each ad call activates 10 paths for a video, 35 paths for a display.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">co2_adcalls</span> <span class="o">=</span> <span class="n">adcalls_cost</span><span class="p">(</span><span class="n">campaign</span><span class="p">,</span> <span class="n">nb_ad_calls</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">creative_type</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">)</span>
<span class="n">co2_adcalls</span><span class="o">.</span><span class="n">shows</span><span class="p">()</span>

<span class="c1"># This is a AdcallCost object.</span>
<span class="c1">#        kgco2_allocation_network:       use:   0.1972    manufacture:   0.0578</span>
<span class="c1">#         kgco2_allocation_server:       use:   0.0053    manufacture:   0.0174</span>
<span class="c1">#                         Overall:       use:   0.2025    manufacture:   0.0752</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The carbon emissions of a number of ad calls is: </span><span class="si">{</span><span class="n">co2_adcalls</span><span class="o">.</span><span class="n">overall</span><span class="o">.</span><span class="n">total</span><span class="si">}</span><span class="s1"> kgco2&#39;</span><span class="p">)</span>
<span class="c1">#&gt; The total of the carbon emissions for the campaign is: 0.27772526781306983 kgco2</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="authors-and-acknowledgment">
<h2>Authors and acknowledgment<a class="headerlink" href="#authors-and-acknowledgment" title="Link to this heading">¶</a></h2>
<p>Initially developped <a class="reference external" href="https://greenbids.ai">&#64;greenbids.ai</a>.</p>
<p>Based on DigitalCarbon framework.</p>
</section>
</section>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">carbon</a><ul>
<li class="toctree-l2"><a class="reference internal" href="apidoc/carbon.html">carbon package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#module-carbon.compute_footprints">carbon.compute_footprints module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#module-carbon.digital_carbon_framework">carbon.digital_carbon_framework module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#module-carbon.pandas">carbon.pandas module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#module-carbon.utils">carbon.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="apidoc/carbon.html#module-carbon">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">ad-carbon-calculation-framework</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">carbon</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="apidoc/modules.html" title="next chapter">carbon</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, OneframeDigital.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>